<?php

namespace BlogBundle\Repository;

use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\QueryBuilder;
/**
 * ArticleRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ArticleRepository extends \Doctrine\ORM\EntityRepository
{
  public function getArticles(){
    $em = $this->getDoctrine()->getManager();
    $articleManager->getRepository('BlogBundle:Article');
  }

  public function myFindAll()
  {
    /* Comment on veut effectuer une recherche dans Article, on se positionne dans son repository,
    puis on créer un alias via ('a'), on récupère la Query puis les résultats et on retourne le tout,
    le résultat sera affiché par le controleur BlogController.*/
    return $this
    ->createQueryBuilder('a')
    ->getQuery()
    ->getResult();
  }

  public function findLimitDql(){
    /* On créer une méthode limitant les résultats à 10 articles via DQL, cela permettra de paginer
    les résultats et de fluidifier la navigation */
    $dql = $this->_em->createQuery("SELECT a FROM BlogBundle:Article a WHERE a.id <= 10");
    $dql->getResult();
  }
}

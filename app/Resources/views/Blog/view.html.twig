{% extends('::layout.html.twig')%}

{% block title %} {{ article.titre }} {% endblock %}

{% block body %}
<div class="container">
  <div class="row">
    <a href="{{ path('home')}}">Retour à l'accueil</a>
    <h2 class="text-center">{{ article.titre }}</h2>
      {% if article.imageFile is not null %}
        <img src="{{ asset(article.imageFile) }}" alt="{{ article.imageFile }}" class="responsive-img">
      {% endif %}
    <p class="text-center">Par <strong>{{ article.auteur }}</strong>, le {{ article.datePublication|date('d/m/Y')}}</p>
    <hr />
    <p class="text-center">{{ article.contenu|raw }}</p>
    <br>
    <br>
    <br>
    <div class="row">
      {% for commentaire in commentaire %}
        <div class="text-center">
          <h3>{{ commentaire.auteur }}</h3>
          <p class="text-center">{{ commentaire.contenu|raw }}</p>
        </div>
      {% endfor %}
    </div>
    {% if is_granted('IS_AUTHENTICATED_FULLY') and article.online != true %}
        <div class="row well">
          {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
          {{ form_errors(form) }}
          <div class="form-group">
            {{ form_label(form.contenu, "Commenter", {'label_attr': {'class': 'control-label'}}) }}
            {{ form_errors(form.contenu) }}
            {{ form_widget(form.contenu, {'attr': {'class': 'form-control'}})}}
          </div>
          {{ form_end(form) }}
        </div>
      {% else %}
      <p class="red-text center-align"><strong>Cet article a été bloqué par son auteur ou par la modération, les commentaires ne sont plus acceptés.</strong></p>
    {% endif %}
  </div>
</div>
{% endblock %}
